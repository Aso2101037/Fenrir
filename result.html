<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>
        function performLocationSearch(latitude, longitude, radius, searchTerm) {
            // 仮のレストランデータ（実際の場合はAPIからデータを取得することが一般的です）
            const restaurantData = [
                {
                name: 'レストランA',
                address: '〇〇市〇〇区〇〇町',
                latitude: 35.1234,
                longitude: 139.5678,
                },
                {
                name: 'レストランB',
                address: '△△市△△区△△町',
                latitude: 35.6789,
                longitude: 139.9012,
                },
                // 他のレストランデータを追加
            ];

            // レストランデータの表示
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `現在位置: 緯度 ${latitude}, 経度 ${longitude}<br>`;
            resultsDiv.innerHTML += `検索半径: ${radius}メートル<br>`;
            resultsDiv.innerHTML += `検索条件: ${searchTerm}<br>`;
            resultsDiv.innerHTML += '<h2>検索結果:</h2>';

            // 指定された範囲内のレストランを検索
            const restaurantsWithinRadius = restaurantData.filter(restaurant => {
                // レストランの緯度経度から距離を計算（実際には専用の関数やライブラリを使用します）
                const distance = calculateDistance(latitude, longitude, restaurant.latitude, restaurant.longitude);
                return distance <= radius;
            });

            if (restaurantsWithinRadius.length > 0) {
                // 検索結果を表示
                restaurantsWithinRadius.forEach(restaurant => {
                resultsDiv.innerHTML += `<p><strong>${restaurant.name}</strong><br>${restaurant.address}</p>`;
                });
            } else {
                resultsDiv.innerHTML += '検索条件に該当するレストランはありませんでした';
            }
            }

            // 緯度経度から距離を計算する仮の関数（実際には専用の関数やライブラリを使用します）
            function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371e3; // 地球の半径（メートル）
            const φ1 = (lat1 * Math.PI) / 180;
            const φ2 = (lat2 * Math.PI) / 180;
            const Δφ = ((lat2 - lat1) * Math.PI) / 180;
            const Δλ = ((lon2 - lon1) * Math.PI) / 180;

            const a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +
                Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) * Math.sin(Δλ / 2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

            const distance = R * c;
            return distance;
            }


    </script>
</body>

</html>